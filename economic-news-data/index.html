<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economic News Headlines Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .summary { background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .categories { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; }
        .category { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
        .number { font-size: 24px; font-weight: bold; color: #2563eb; }
        .last-updated { color: #666; font-size: 14px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Economic News Headlines Tracker</h1>
        <p>Automated tracking of economic keywords in major news outlets</p>
    </div>

    <div class="summary" id="summary">
        <h2>Latest Data</h2>
        <div id="loading">Loading data...</div>
    </div>

    <div id="categories-container">
        <h2>Categories</h2>
        <div class="categories" id="categories"></div>
    </div>

    <div>
        <h2>Raw Data</h2>
        <p>Download: <a href="headlines.csv">Daily Aggregates (CSV)</a> | <a href="headlines_text.csv">All Headlines (CSV)</a></p>
    </div>

    <script>
        async function loadData() {
            try {
                const response = await fetch('summary.json');
                const data = await response.json();
                
                // Update summary
                const summaryDiv = document.getElementById('summary');
                summaryDiv.innerHTML = `
                    <h2>Latest Data</h2>
                    <p><strong>Last Scrape:</strong> ${data.latest_scrape.date}</p>
                    <p><strong>Headlines Collected:</strong> ${data.latest_scrape.total_headlines}</p>
                    <p><strong>Sources:</strong> ${data.latest_scrape.sources_scraped.join(', ')}</p>
                    <p><strong>Relevance Score:</strong> ${data.latest_scrape.relevance_score.toFixed(3)}</p>
                    <p><strong>Total Days Tracked:</strong> ${data.total_days}</p>
                    <p class="last-updated">Data updated: ${new Date(data.last_updated).toLocaleString()}</p>
                `;
                
                // Update categories
                const categoriesDiv = document.getElementById('categories');
                categoriesDiv.innerHTML = '';
                
                Object.entries(data.categories).forEach(([name, stats]) => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'category';
                    categoryDiv.innerHTML = `
                        <h3>${name.replace(/_/g, ' ').replace(/\w/g, l => l.toUpperCase())}</h3>
                        <div class="number">${stats.latest}</div>
                        <small>Latest count</small><br>
                        <small>Avg: ${stats.average.toFixed(1)} | Total: ${stats.total}</small>
                    `;
                    categoriesDiv.appendChild(categoryDiv);
                });
                
            } catch (error) {
                document.getElementById('loading').innerHTML = 'Error loading data: ' + error.message;
            }
        }
        
        loadData();
    </script>
</body>
</html>
