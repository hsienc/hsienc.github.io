<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economic News Data</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .summary { background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        
        /* Updated grid for exactly 4 columns */
        .categories { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 15px; 
        }
        
        /* Responsive: 2 columns on tablets, 1 on mobile */
        @media (max-width: 768px) {
            .categories { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 480px) {
            .categories { grid-template-columns: 1fr; }
        }
        
        .category { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
        .number { font-size: 24px; font-weight: bold; color: #2563eb; }
        .last-updated { color: #666; font-size: 14px; }
        .sources-organized { margin-top: 10px; }
        .sources-organized strong { color: #333; }
        
        /* Sample headlines styling */
        .sample-headlines { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            margin-top: 20px; 
            border: 1px solid #ddd; 
        }
        .headline-item { 
            padding: 10px 0; 
            border-bottom: 1px solid #eee; 
        }
        .headline-item:last-child { 
            border-bottom: none; 
        }
        .headline-title { 
            font-weight: bold; 
            color: #333; 
            margin-bottom: 5px; 
        }
        .headline-title a { 
            color: #2563eb; 
            text-decoration: none; 
        }
        .headline-title a:hover { 
            text-decoration: underline; 
        }
        .headline-meta { 
            font-size: 12px; 
            color: #666; 
        }
        
        /* References section styling */
        .references { 
            background: #f9f9f9; 
            padding: 20px; 
            border-radius: 8px; 
            margin-top: 40px; 
            border-top: 3px solid #2563eb; 
        }
        .references h2 { 
            color: #333; 
            margin-bottom: 20px; 
            border-bottom: 2px solid #eee; 
            padding-bottom: 10px; 
        }
        .reference-item {
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #2563eb;
        }
        .reference-item h4 {
            margin: 0 0 8px 0;
            color: #2563eb;
            font-size: 16px;
        }
        .reference-item .citation {
            font-size: 14px;
            color: #333;
            line-height: 1.4;
            margin-bottom: 5px;
        }
        .reference-item .url {
            font-size: 13px;
            color: #666;
        }
        .reference-item .url a {
            color: #2563eb;
            text-decoration: none;
        }
        .reference-item .url a:hover {
            text-decoration: underline;
        }
        .reference-item .categories {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
            font-style: italic;
        }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Economic News Data</h1>
        <p>Automated tracking of economic keywords in major news outlets</p>
    </div>

    <div class="summary" id="summary">
        <h2>Latest Data</h2>
        <div id="loading">Loading data...</div>
    </div>

    <div class="sample-headlines" id="sample-headlines-container" style="display: none;">
        <h2>Sample Headlines from Latest Data</h2>
        <div id="sample-headlines"></div>
    </div>

    <div id="categories-container">
        <h2>Categories</h2>
        <div class="categories" id="categories"></div>
    </div>

    <!-- References Section -->
    <div class="references">
        <h2>References</h2>
        
        <!-- Academic Paper -->
        <div class="reference-item">
            <h4>Measuring Economic Policy Uncertainty (on methodology and category keywords)</h4>
            <div class="citation">Baker, S. R., Bloom, N., & Davis, S. J. (2016). Measuring Economic Policy Uncertainty. <em>The Quarterly Journal of Economics</em>, 131(4), 1593â€“1636.</div>
            <div class="url"><a href="https://doi.org/10.1093/qje/qjw024" target="_blank">https://doi.org/10.1093/qje/qjw024</a></div>
        </div>
        
       <!-- News Sources -->
        <div class="reference-item">
            <h4>ABC News</h4>
<!--             <div class="citation">ABC News. <em>abcnews.go.com</em>.</div> -->
            <div class="url"><a href="https://abcnews.go.com" target="_blank">https://abcnews.go.com</a></div>
            <div class="categories">Subcategories: Top Stories, US News, International, Politics, Business, Technology, Health</div>
        </div>
        
        <div class="reference-item">
            <h4>Bloomberg</h4>
<!--             <div class="citation">Bloomberg L.P. <em>bloomberg.com</em>.</div> -->
            <div class="url"><a href="https://www.bloomberg.com" target="_blank">https://www.bloomberg.com</a></div>
            <div class="categories">Subcategories: Market News, Economics, Technology, Business, Opinion, Wealth</div>
        </div>
        
        <div class="reference-item">
            <h4>CBS News</h4>
<!--             <div class="citation">CBS Broadcasting Inc. <em>cbsnews.com</em>.</div> -->
            <div class="url"><a href="https://www.cbsnews.com" target="_blank">https://www.cbsnews.com</a></div>
            <div class="categories">Subcategories: Top News, US News, World News, MoneyWatch, Health, Technology, Politics</div>
        </div>
        
        <div class="reference-item">
            <h4>CNBC</h4>
            <div class="citation">CNBC LLC. <em>cnbc.com</em>.</div>
            <div class="url"><a href="https://www.cnbc.com" target="_blank">https://www.cnbc.com</a></div>
            <div class="categories">Subcategories: Economy, Finance, Business News, Wealth, Top News, Earnings, US News, World News, Retail</div>
        </div>
        
        <div class="reference-item">
            <h4>The New York Times</h4>
<!--             <div class="citation">The New York Times Company. <em>nytimes.com</em>.</div> -->
            <div class="url"><a href="https://www.nytimes.com" target="_blank">https://www.nytimes.com</a></div>
            <div class="categories">Subcategories: US, World, Politics, Business, Energy & Environment, Small Business, Economy, Technology, Health</div>
        </div>
        
        <div class="reference-item">
            <h4>US News & World Report</h4>
<!--             <div class="citation">U.S. News & World Report L.P. <em>usnews.com</em>.</div> -->
            <div class="url"><a href="https://www.usnews.com" target="_blank">https://www.usnews.com</a></div>
            <div class="categories">Subcategories: Education, Health, Money, Nation & World, Opinion, Travel</div>
        </div>
        
        <div class="reference-item">
            <h4>The Wall Street Journal</h4>
<!--             <div class="citation">Dow Jones & Company, Inc. <em>wsj.com</em>.</div> -->
            <div class="url"><a href="https://www.wsj.com" target="_blank">https://www.wsj.com</a></div>
            <div class="categories">Subcategories: Economy, US Business, Markets, Personal Finance, US News, World News, Technology</div>
        </div>
        
        <div class="reference-item">
            <h4>Yahoo News</h4>
<!--             <div class="citation">Yahoo Inc. <em>news.yahoo.com</em>.</div> -->
            <div class="url"><a href="https://news.yahoo.com" target="_blank">https://news.yahoo.com</a></div>
            <div class="categories">Subcategories: Latest News, Finance</div>
        </div>
        
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #ddd; font-size: 12px; color: #666;">
            <p><strong>Data Collection:</strong> Headlines are collected via RSS feeds and analyzed for economic keywords. This tracker is for informational purposes only and does not constitute financial advice.</p>
            <p><strong>Update Frequency:</strong> Data is automatically updated daily through automated scraping.</p>
            <p>Eric Hsienchen Chu</p>
        </div>
    </div>

    <script>
        async function loadData() {
            try {
                const response = await fetch('summary.json');
                const data = await response.json();
                
                // Use organized sources if available, fallback to original
                const sourcesToDisplay = data.latest_scrape.sources_organized || data.latest_scrape.sources_scraped;
                const sourcesText = Array.isArray(sourcesToDisplay) ? sourcesToDisplay.join(', ') : sourcesToDisplay;
                
                // Update summary
                const summaryDiv = document.getElementById('summary');
                summaryDiv.innerHTML = `
                    <h2>Latest Data</h2>
                    <p><strong>Last Scrape:</strong> ${data.latest_scrape.date}</p>
                    <p><strong>Headlines Collected:</strong> ${data.latest_scrape.total_headlines}</p>
                    <div class="sources-organized">
                        <strong>Sources:</strong> ${sourcesText}
                    </div>
                    <p><strong>Relevance Score:</strong> ${data.latest_scrape.relevance_score.toFixed(3)}</p>
                    <p><strong>Total Days Tracked:</strong> ${data.total_days}</p>
                    <p class="last-updated">Data updated: ${new Date(data.last_updated).toLocaleString()}</p>
                `;
                
                // Update categories
                const categoriesDiv = document.getElementById('categories');
                categoriesDiv.innerHTML = '';
                
                Object.entries(data.categories).forEach(([name, stats]) => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'category';
                    categoryDiv.innerHTML = `
                        <h3>${name.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</h3>
                        <div class="number">${stats.latest}</div>
                        <small>Latest count</small><br>
                        <small>Avg: ${stats.average.toFixed(1)} | Total: ${stats.total}</small>
                    `;
                    categoriesDiv.appendChild(categoryDiv);
                });
                
                // Display sample headlines if available
                if (data.latest_scrape.sample_headlines && data.latest_scrape.sample_headlines.length > 0) {
                    const sampleHeadlinesContainer = document.getElementById('sample-headlines-container');
                    const sampleHeadlinesDiv = document.getElementById('sample-headlines');
                    
                    sampleHeadlinesDiv.innerHTML = '';
                    
                    data.latest_scrape.sample_headlines.forEach((headline, index) => {
                        const headlineDiv = document.createElement('div');
                        headlineDiv.className = 'headline-item';
                        
                        const titleElement = headline.link ? 
                            `<a href="${headline.link}" target="_blank">${headline.title}</a>` : 
                            headline.title;
                        
                        headlineDiv.innerHTML = `
                            <div class="headline-title">${index + 1}. ${titleElement}</div>
                            <div class="headline-meta">
                                Source: ${headline.source}
                                ${headline.published_at ? ` | Published: ${new Date(headline.published_at).toLocaleString()}` : ''}
                            </div>
                        `;
                        sampleHeadlinesDiv.appendChild(headlineDiv);
                    });
                    
                    sampleHeadlinesContainer.style.display = 'block';
                }
                
            } catch (error) {
                document.getElementById('loading').innerHTML = 'Error loading data: ' + error.message;
            }
        }
        
        loadData();
    </script>
</body>
</html>
